{"version":3,"file":"integrity-webview-client.umd.js","sources":["../../src/services/receive-message.service.ts","../../src/services/webview-client.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nexport class ReceiveMessageService {\nprivate InitKey: string = 'com.brickchain.integrity.init';\nprivate PollKey: string = 'com.brickchain.integrity.poll';\nprivate HandleKey: string = 'com.brickchain.integrity.handle';\nprivate HandleResultKey: string = 'com.brickchain.integrity.handle.result';\nprivate HandleErrorKey: string = 'com.brickchain.integrity.handle.error';\n/**\n * @param {?} event\n * @return {?}\n */\npublic receiveMessage(event: any): void {\n    if (/*isDefined(event.data.op)*/event.data.op) {\n      let /** @type {?} */ script = event.data;\n      switch (script.op) {\n        case 'init':\n          script.result = ( /** @type {?} */((<any>window)))[this.InitKey] ? ( /** @type {?} */((<any>window)))[this.InitKey](script.param) : null;\n          break;\n        case 'poll':\n          script.result = ( /** @type {?} */((<any>window)))[this.PollKey] ? ( /** @type {?} */((<any>window)))[this.PollKey]() : null;\n          break;\n        case 'handle':\n          script.result = ( /** @type {?} */((<any>window)))[this.HandleKey] ? ( /** @type {?} */((<any>window)))[this.HandleKey]() : null;\n          break;\n        case 'result':\n          if (/*isDefined(event.data.param)*/event.data.param) {\n            script.result = ( /** @type {?} */((<any>window)))[this.HandleResultKey] ? ( /** @type {?} */((<any>window)))[this.HandleResultKey](script.param) : null;\n          } else {\n            script.result = ( /** @type {?} */((<any>window)))[this.HandleResultKey] ? ( /** @type {?} */((<any>window)))[this.HandleResultKey]() : null;\n          }\n          break;\n        case 'error':\n          script.result = ( /** @type {?} */((<any>window)))[this.HandleErrorKey] ? ( /** @type {?} */((<any>window)))[this.HandleErrorKey](script.param) : null;\n          break;\n        case 'title':\n          script.result = document.title;\n          break;\n        default:\n          script.error = 'unsupported operation'\n      }\n      event.source.postMessage(script, event.origin);\n    }\n  }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction ReceiveMessageService_tsickle_Closure_declarations() {\n/** @type {?} */\nReceiveMessageService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nReceiveMessageService.ctorParameters;\n/** @type {?} */\nReceiveMessageService.prototype.InitKey;\n/** @type {?} */\nReceiveMessageService.prototype.PollKey;\n/** @type {?} */\nReceiveMessageService.prototype.HandleKey;\n/** @type {?} */\nReceiveMessageService.prototype.HandleResultKey;\n/** @type {?} */\nReceiveMessageService.prototype.HandleErrorKey;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Injectable } from '@angular/core';\nexport class WebviewClientService {\nprivate InitKey: string = 'com.brickchain.integrity.init';\nprivate PollKey: string = 'com.brickchain.integrity.poll';\nprivate CancelKey: string = 'com.brickchain.integrity.cancel';\n/**\n * @param {?} action\n * @return {?}\n */\npublic init(action: (params: string) => void): void {\n        \n        ( /** @type {?} */((<any>window)))[this.InitKey] = (params: string) => {\n            action(params);\n        };\n\n        this.poll();\n\n    }\n/**\n * @return {?}\n */\npublic poll(): void {\n        \n        ( /** @type {?} */((<any>window)))[this.PollKey] = () => {\n            console.log('hello');\n        };\n    }\n/**\n * @return {?}\n */\npublic cancel(): string {\n        return this.CancelKey;\n    }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction WebviewClientService_tsickle_Closure_declarations() {\n/** @type {?} */\nWebviewClientService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nWebviewClientService.ctorParameters;\n/** @type {?} */\nWebviewClientService.prototype.InitKey;\n/** @type {?} */\nWebviewClientService.prototype.PollKey;\n/** @type {?} */\nWebviewClientService.prototype.CancelKey;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["Injectable"],"mappings":"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"}